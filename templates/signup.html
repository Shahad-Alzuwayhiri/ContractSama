{% extends "base.html" %}
{% block title %}ุชุณุฌูู ุญุณุงุจ ููุธู{% endblock %}
{% block content %}
<div class="auth-page">
  <div class="auth-card">
    <div class="inner">
      <h2 class="auth-title">ุชุณุฌูู ุญุณุงุจ</h2>
      <form method="POST" autocomplete="off" novalidate>
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

        <!-- ููุน ุงูุญุณุงุจ: ููุธู / ูุฏูุฑ -->
        <div class="form-row">
          <label class="form-label" for="role">ููุน ุงูุญุณุงุจ</label>
          <select class="input" id="role" name="role" required>
            <option value="employee" {% if (request.form.role or '') != 'manager' %}selected{% endif %}>ููุธู</option>
            <option value="manager"  {% if (request.form.role or '') == 'manager' %}selected{% endif %}>ูุฏูุฑ</option>
          </select>
        </div>
          
        <div class="form-row">
          <label class="form-label" for="name">ุงูุงุณู ุงููุงูู</label>
          <input class="input" id="name" name="name" required value="{{ request.form.name or '' }}" autocomplete="name">
        </div>

        <div class="form-row">
          <label class="form-label" for="email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
          <input class="input" id="email" name="email" type="email" required placeholder="name@example.com" value="{{ request.form.email or '' }}" autocomplete="username">
        </div>

        <div class="form-row">
          <label class="form-label" for="phone">ุงูุฌูุงู (05xxxxxxxx)</label>
          <input class="input" id="phone" name="phone" pattern="05\d{8}" inputmode="numeric" placeholder="05xxxxxxxx" value="{{ request.form.phone or '' }}" autocomplete="tel">
        </div>

        <div class="form-row">
          <label class="form-label" for="pw1">ูููุฉ ุงููุฑูุฑ</label>
          <div class="input-wrap">
            <input class="input" id="pw1" name="password" type="password" minlength="8" placeholder="โขโขโขโขโขโขโขโข" required autocomplete="new-password">
            <button type="button" class="toggle-eye" aria-label="ุฅุธูุงุฑ/ุฅุฎูุงุก ูููุฉ ุงููุฑูุฑ" onclick="togglePwd('pw1', this)">๐๏ธ</button>
          </div>
        </div>

        <div class="form-row">
          <label class="form-label" for="pw2">ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ</label>
          <div class="input-wrap">
            <input class="input" id="pw2" name="confirm_password" type="password" minlength="8" placeholder="โขโขโขโขโขโขโขโข" required autocomplete="new-password">
            <button type="button" class="toggle-eye" aria-label="ุฅุธูุงุฑ/ุฅุฎูุงุก ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ" onclick="togglePwd('pw2', this)">๐๏ธ</button>
          </div>
        </div>

        <button class="btn btn-accent btn-block" type="submit">ุฅูุดุงุก ุงูุญุณุงุจ</button>

        <div class="auth-actions">
          <span class="small">ูุฏูู ุญุณุงุจุ</span>
          <a class="btn-link small" href="{{ url_for('login') }}">ุชุณุฌูู ุงูุฏุฎูู</a>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
function togglePwd(id, btn){
  const i = document.getElementById(id);
  i.type = (i.type === 'password') ? 'text' : 'password';
  btn.style.opacity = (i.type === 'password') ? .7 : 1;
}
</script>
{% endblock %}
