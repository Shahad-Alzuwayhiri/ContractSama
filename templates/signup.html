{% extends "base.html" %}
{% block title %}ุฅูุดุงุก ุญุณุงุจ - {{ BRAND.name }}{% endblock %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-12 col-lg-8">
    <div class="card brand-top">
      <div class="card-body p-4 p-md-5">
        <div class="text-center mb-4">
          <img src="{{ url_for('static', filename='img/logo.png') }}" alt="logo" height="56">
          <h3 class="mt-3 mb-0 brand-name">ุชุณุฌูู ุญุณุงุจ ููุธู</h3>
        </div>

        <form id="signupForm" method="POST" novalidate>
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">ุงูุงุณู ุงููุงูู</label>
              <input type="text" name="name" class="form-control" required>
            </div>
            <div class="col-md-6">
              <label class="form-label">ุฑูู ุงูุฌูุงู</label>
              <input type="tel" name="phone" class="form-control" placeholder="05XXXXXXXX" required>
            </div>

            <div class="col-md-6">
              <label class="form-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
              <input type="email" name="email" class="form-control" required autocomplete="email">
            </div>

            <div class="col-md-6">
              <label class="form-label">ูููุฉ ุงููุฑูุฑ</label>
              <div class="input-group">
                <input type="password" name="password" id="password" class="form-control" required minlength="8" autocomplete="new-password">
                <button class="btn btn-outline-secondary" type="button" id="togglePassword">๐</button>
              </div>
              <div class="form-text">8 ุฎุงูุงุช ุนูู ุงูุฃูู.</div>
            </div>

            <div class="col-md-6">
              <label class="form-label">ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ</label>
              <div class="input-group">
                <input type="password" name="confirm_password" id="confirm_password" class="form-control" required minlength="8" autocomplete="new-password">
                <button class="btn btn-outline-secondary" type="button" id="toggleConfirm">๐</button>
              </div>
              <div id="matchMsg" class="form-text text-danger d-none">โ ูููุชุง ุงููุฑูุฑ ุบูุฑ ูุชุทุงุจูุชูู</div>
            </div>
          </div>

          <button class="btn w-100 mt-3 brand-btn">ุฅูุดุงุก ุงูุญุณุงุจ</button>
        </form>

        <p class="text-center mt-3 mb-0">
          ุนูุฏู ุญุณุงุจุ <a href="{{ url_for('login') }}">ุณุฌูู ุงูุฏุฎูู</a>
        </p>
      </div>
    </div>
  </div>
</div>
{% endblock %}
{% block scripts %}
<script>
  const pw=document.getElementById('password');
  const cpw=document.getElementById('confirm_password');
  const msg=document.getElementById('matchMsg');
  const form=document.getElementById('signupForm');

  function checkMatch(){
    if(!pw.value || !cpw.value){ msg.classList.add('d-none'); return true; }
    const same=pw.value===cpw.value;
    msg.textContent=same?'โ ูููุชุง ุงููุฑูุฑ ูุชุทุงุจูุชุงู':'โ ูููุชุง ุงููุฑูุฑ ุบูุฑ ูุชุทุงุจูุชูู';
    msg.classList.toggle('text-success', same);
    msg.classList.toggle('text-danger', !same);
    msg.classList.remove('d-none');
    return same;
  }
  pw.addEventListener('input', checkMatch);
  cpw.addEventListener('input', checkMatch);
  form.addEventListener('submit', (e)=>{ if(!checkMatch()){ e.preventDefault(); cpw.focus(); } });
  document.getElementById('togglePassword').onclick=()=>{ pw.type=pw.type==='password'?'text':'password'; };
  document.getElementById('toggleConfirm').onclick=()=>{ cpw.type=cpw.type==='password'?'text':'password'; };
</script>
{% endblock %}
