{% extends "base.html" %}
{% block title %}معاينة العقد{% endblock %}
{% block content %}
<div class="container my-4">
  <div class="card p-4">
    <h3 class="mb-3">معاينة العقد (نفس النص الذي سيُحفظ)</h3>
    <hr>
    <pre style="white-space: pre-wrap; line-height:1.9; font-size:15px; direction: rtl; text-align:right;">{{ preview_text }}</pre>

    <form method="POST" action="{{ url_for('contracts_create') }}" class="mt-4">
      <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
      <!-- نعيد تمرير البيانات حتى إذا اخترت حفظ من هنا -->
      {% if form_data %}
        {% for k, v in form_data.items() %}
          <input type="hidden" name="{{ k }}" value="{{ v }}">
        {% endfor %}
      {% endif %}
      <input type="hidden" name="contract_template" value="{{ contract_template|e }}">

      <div class="d-flex gap-2">
        <button type="submit" name="action" value="back" class="btn btn-outline-secondary">رجوع للتعديل</button>
        <button type="submit" name="action" value="save" class="btn btn-primary">حفظ</button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
