{% extends "base.html" %}
{% block title %}تسجيل الدخول{% endblock %}
{% block content %}
<div class="auth-page">
  <div class="auth-card">
    <div class="inner">
      <h2 class="auth-title">تسجيل الدخول</h2>
      <form method="POST" class="form" novalidate>
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <div class="form-row">
          <label class="form-label" for="email">البريد الإلكتروني</label>
          <input id="email" class="input" name="email" type="email"
                 placeholder="name@example.com" required
                 value="{{ request.form.email or '' }}" dir="ltr"
                 inputmode="email" autocomplete="username">
        </div>
        <div class="form-row">
          <label class="form-label" for="pwd">كلمة المرور</label>
          <div class="input-wrap">
            <input class="input" id="pwd" name="password" type="password"
                   placeholder="••••••••" required autocomplete="current-password">
            <button type="button" class="toggle-eye" aria-label="إظهار/إخفاء" onclick="togglePwd('pwd', this)">👁️</button>
          </div>
        </div>

        <!-- خيار الدخول كمدير (لا يغيّر منطقك الحالي؛ يرسل as_manager=1 للباك‌اند إن رغبت باستخدامه) -->
        <div class="form-row" style="margin-top:6px;">
          <label class="form-check" style="display:flex;align-items:center;gap:8px;cursor:pointer;">
            <input type="checkbox" name="as_manager" value="1" {% if request.form.as_manager %}checked{% endif %}>
            الدخول كمدير
          </label>
          <div class="small" style="color:var(--muted);margin-top:4px;">
            إذا كان لديك صلاحيات مدير، فعِّل هذا الخيار ليتم توجيهك إلى لوحة المدير بعد تسجيل الدخول.
          </div>
        </div>

        <button class="btn btn-primary btn-block" type="submit">دخول</button>
        <div class="auth-actions">
          <a class="btn-link small" href="{{ url_for('forgot_password') }}">نسيت كلمة المرور؟</a>
          <a class="btn-link small" href="{{ url_for('signup') }}">تسجيل جديد</a>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
function togglePwd(id, btn){
  const i = document.getElementById(id);
  i.type = (i.type === 'password') ? 'text' : 'password';
  btn.style.opacity = (i.type === 'password') ? .7 : 1;
}
</script>
{% endblock %}
